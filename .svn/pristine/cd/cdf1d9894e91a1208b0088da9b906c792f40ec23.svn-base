<div class="container-fluid">
  <div class="row">
    <div class="col-md-12 main">
      <h1 class="page-header"></h1>
      <h2 class="sub-header">
        最新消息 管理
        <!-- TODO: 新增 的彈跳 -->
        <span>
          <a href="#" data-toggle="modal" data-target="#editorModal" onclick="<%=ctrl%>.embedEditor('undefined');"><i class="glyphicon glyphicon-plus-sign"></i></a>
        </span>
        <span>
          <button type="button" class="btn btn-default pull-right" onclick="<%=ctrl%>.doLogout();">logout</button>
        </span>
      </h2>
      <div class="table-responsive">
        <table class="table table-striped">
          <thead>
            <tr>
              <th>ID</th>
              <th>公開</th>
              <th>標題</th>
              <th>引文</th>
              <th>修改時間</th>
              <th>功能</th>
            </tr>
          </thead>
          <tbody>
            <!-- TODO: 時間格式(有helper嗎?) -->
            <% if (value && value.list.length > 0) {
               value.list.reverse().forEach(function(item) {
                 function date(target) {
                   var t = new Date(item[target]);
                   var time = t.toLocaleTimeString().substring(0, 5);
                   var rtn = t.getFullYear() +'-'+ ('0'+(t.getMonth()+1)).slice(-2) +'-'+ ('0'+t.getDate()).slice(-2) + ' ' + time;
                   return rtn;
                 }

            %>
            <tr>
              <td><%= item.ngID %></td>
              <td><% if(item.isPublic < 1) {%>--<%}else{%>v<%}%></td>
              <td><%= item.title %></td>
              <td><%= item.summary %></td>
              <td><%= date('mdTime') %></td>
              <td>
                <!-- TODO: 編輯 的彈跳 -->
                <!-- <button class="btn btn-default" onclick="<%=ctrl%>.showInfo('<%=item.siID%>');">編輯</button> -->
                <button class="btn btn-default" data-toggle="modal" data-target="#editorModal" onclick="<%=ctrl%>.embedEditor('<%=item.ngID%>');">編輯</button>
                <button class="btn btn-danger" onclick="<%=ctrl%>.delete('<%=item.ngID%>');">刪除</button>
              </td>
            </tr>
            <% });
             } %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- 編輯器開始 -->
<!-- data-backdrop="static" -->
<div class="modal fade modalstyle" id="editorModal" role="dialog" aria-labelledby="editorModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="editor modal-content">
      <!-- load Editor-->
    </div>
  </div>
</div>
<!-- 編輯器結束 -->
