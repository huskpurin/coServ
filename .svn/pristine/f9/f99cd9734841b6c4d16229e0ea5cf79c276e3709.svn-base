<% var period = '' %>
<div class="repager">
  <div class="title">活動報名 <span>Registration System</span></div>
  <div class="article">
      <div class="section">
        <h4><strong>報名梯次</strong></h4>
        <table class="table">
          <thead>
            <tr>
              <th>梯次</th>
              <th>日期</th>
              <th>時間</th>
              <th>區域</th>
              <th>場次</th>
              <th>報名狀態</th>
            </tr>
          </thead>
          <tbody>
            <!-- 測試資料
            <tr>
              <td class="text-center">1</td>
              <td>8/2(六)-8/3(日)、8/9(六)-8/10(日)</td>
              <td>09:00 - 17:45</td>
              <td>北部</td>
              <td>台北市</td>
              <td>尚未開放報名</td>
            </tr>
            <tr>
              <td class="text-center">2</td>
              <td>8/2(六)-8/3(日)、8/9(六)-8/10(日)</td>
              <td>09:00 - 17:45</td>
              <td>北部</td>
              <td>台北市</td>
              <td>尚未開放報名</td>
            </tr>
            <tr>
              <td class="text-center">3</td>
              <td>8/2(六)-8/3(日)、8/9(六)-8/10(日)</td>
              <td>09:00 - 17:45</td>
              <td>北部</td>
              <td>台北市</td>
              <td>尚未開放報名</td>
            </tr>
            <tr>
              <td class="text-center">4</td>
              <td>8/2(六)-8/3(日)、8/9(六)-8/10(日)</td>
              <td>09:00 - 17:45</td>
              <td>北部</td>
              <td>台北市</td>
              <td src="/play/bu.png"></td>
            </tr>
            <tr>
              <td class="text-center">5</td>
              <td>8/2(六)-8/3(日)、8/9(六)-8/10(日)</td>
              <td>09:00 - 17:45</td>
              <td>北部</td>
              <td>台北市</td>
              <td>尚未開放報名</td>
            </tr>
            <tr>
              <td class="text-center">6</td>
              <td>8/2(六)-8/3(日)、8/9(六)-8/10(日)</td>
              <td>09:00 - 17:45</td>
              <td>北部</td>
              <td>台北市</td>
              <td>尚未開放報名</td>
            </tr>
            <tr>
              <td class="text-center">7</td>
              <td>8/2(六)-8/3(日)、8/9(六)-8/10(日)</td>
              <td>09:00 - 17:45</td>
              <td>北部</td>
              <td>台北市</td>
              <td>尚未開放報名</td>
            </tr>
            <tr>
              <td class="text-center">8</td>
              <td>8/2(六)-8/3(日)、8/9(六)-8/10(日)</td>
              <td>09:00 - 17:45</td>
              <td>北部</td>
              <td>台北市</td>
              <td>尚未開放報名</td>
            </tr>
            <tr>
              <td class="text-center">9</td>
              <td>8/2(六)-8/3(日)、8/9(六)-8/10(日)</td>
              <td>09:00 - 17:45</td>
              <td>北部</td>
              <td>台北市</td>
              <td>尚未開放報名</td>
            </tr>
            <tr>
              <td class="text-center">10</td>
              <td>8/2(六)-8/3(日)、8/9(六)-8/10(日)</td>
              <td>09:00 - 17:45</td>
              <td>北部</td>
              <td>台北市</td>
              <td>尚未開放報名</td>
            </tr> -->

            <% if (value && value.list.length > 0) {
               value.list.reverse().forEach(function(item) {
                 function date(target) {
                   var t = new Date(item[target]);
                   var time = t.toLocaleTimeString().substring(0, 5);
                   var rtn = t.getFullYear() +'-'+ ('0'+(t.getMonth()+1)).slice(-2) +'-'+ ('0'+t.getDate()).slice(-2) + ' ' + time;
                   return rtn;
                 }

                 var sTime = new Date(item.fromTime),
                     eTime = new Date(item.toTime),

                     onTime = new Date(item.regFromTime),
                     offTime = new Date(item.regToTm),
                     now = new Date(),
                     open = (now < offTime) ? true : false;
                  period = sTime.getHours() + ":" + sTime.getMinutes() + "-" + eTime.getHours() + ":" + eTime.getMinutes("mm");
                  period = date('fromTime').substring(11, 16) + ' - ' + date('toTime').substring(11, 16)
            %>
            <!-- open = ( onTime < now && now < offTime) ? true : false; -->
            <tr>
              <td><%= item.doc.title %></td>
              <td><%= item.doc.summary %></td>
              <td><%= period %></td>
              <td><%= item.addr %></td>
              <td><%= item.place %></td>
              <!-- TODO: 報名狀態
              停止報名 || 我要報名 || 尚未開放報名 -->
              <td><% if (open) { %>                
                <!-- <button class="btn btn-warning" onclick="<%=ctrl%>.fillSession('<%=item.siID%>')">我要報名</button> -->
                <!-- <a href="#"><img src="play/bu.png" alt="我要報名" onclick="<%=ctrl%>.fillSession('<%=item.siID%>')"></a> -->
                <!-- <span class="fcO">我要報名</span> -->
                <!-- <span class="fcG">停止報名</span> -->
                尚未開放報名
              <%}%></td>
            </tr>

            <% });
             } %>

          </tbody>
        </table>
        <div class="clear"></div>
      </div>

      <div class="section" id="nobor">
        <h4><strong>報名資料</strong></h4>
          <form id="regForm form-horizontal" role="form" style="margin-top:2em;">
            <div class="form-group col-md-5">
              <label for="siID" class="control-label col-md-3 pa">報名梯次：</label>
              <div class="col-md-9 pa">
                <select id="siID" class="form-control pa" name="siID">
                  <%
                  if (value && value.list.length > 0) {
                    value.list.forEach(function(item) {
                  %>
                  <option value="<%=item.siID%>" siSum="<%= item.doc.summary %>" siPeriod="<%=period%>" siPlace="<%= item.place %>"><%=item.doc.title%></option>
                  <% });
                  } %>
                </select>
              </div>
            </div>
            <div class="clear"></div>

            <div class="form-group col-md-3">
                <label for="fname" class="control-label col-md-3 pa">姓名：</label>
                <div class="col-md-9 pa borderB">
                  <input class="form-control boline" name="fname" id="fname" value="">
                </div>
            </div>
            <div class="form-group col-md-3">
                <label for="gender" class="control-label col-md-3 pa">性別：</label>
                <div class="col-md-9">
                  <select id="gender" name="gender" class="form-control pa">
                    <option value="0">男</option>
                    <option value="1">女</option>
                    <!-- <option value="2">--</option> -->
                  </select>
                </div>
            </div>            
            <div class="clear"></div>

            <div class="form-group col-md-5">
                <label for="orgName" class="control-label col-md-3 pa">公司名稱：</label>
                <div class="col-md-9 pa borderB">
                  <input type="input" class="form-control boline" name="orgName" id="orgName" value="">
                </div>
            </div>
            <div class="form-group col-md-5 col-md-offset-1">
                <label for="orgName" class="control-label col-md-5 pa">公司設立年份：</label>
                <div class="col-md-7">
                  <select id="gender" name="gender" class="form-control pa">
                    <option value="2014">2014</option>
                    <option value="2013">2013</option>
                  </select>
                </div>
            </div>
            <div class="clear"></div>

            <div class="form-group col-md-5">
                <label for="orgName" class="control-label col-md-3 pa">產業類別：</label>
                <div class="col-md-9">
                  <select id="gender" name="gender" class="form-control pa">
                    <option value="服務業">服務業</option>
                    <option value="金融業">金融業</option>
                  </select>
                </div>
            </div>
            <div class="form-group col-md-5 col-md-offset-1">
                <label for="orgName" class="control-label col-md-6 pa">產品/營業項目簡述：</label>
                <div class="col-md-6 pa borderB">
                  <input type="input" class="form-control boline" name="orgName" id="orgName" value="">
                </div>
            </div>
              <!-- <div class="form-group col-md-6">
                <label for="" class="control-label">職稱</label>
                <input type="input" class="form-control" name="" id="" value="">
              </div> -->
              <!-- TODO: api未提供三公司欄位，等吧
              <select id="產業類別" name=""></select>
              <select id="公司設立年份" name=""></select>
              <input type="text" id="產品/營業項目簡述" name=""></input>

              *修改後記得更新collectData()
              -->
            <div class="form-group col-md-5">
                <label for="orgName" class="control-label col-md-2 pa">職稱：</label>
                <div class="col-md-10 pa borderB">
                  <input type="input" class="form-control boline" name="orgName" id="orgName" value="">
                </div>
            </div>
           <div class="clear"></div>

            <div class="form-group col-md-5">
                <label for="phone" class="control-label col-md-3 pa">連絡電話：</label>
                <div class="col-md-9 pa borderB">
                  <input type="input" class="form-control boline" name="phone" id="phone" value="">
                </div>
              </div>
              <div class="form-group col-md-5">
                <label for="fax" class="control-label col-md-3 pa">傳真：</label>
                <div class="col-md-9 pa borderB">
                  <input type="input" class="form-control boline" name="fax" id="fax" value="">
                </div>
              </div>
              <div class="clear"></div>

              <div class="form-group col-md-9">
                <label for="email" class="control-label col-md-2 pa">E-mail：</label>
                <div class="col-md-10 pa borderB">
                  <input type="email" class="form-control boline" name="email" id="email" value="" required>
                </div>
              </div>
              <div class="form-group col-md-9">
                <label for="addr" class="control-label col-md-2 pa">連絡地址：</label>
                <div class="col-md-10 pa borderB">
                  <input type="input" class="form-control boline" name="addr" id="addr" value="">
                </div>
              </div>
          </form>

          <div class="form-group col-md-12 row maT">
            <div class="text-center">
              <!-- <button type="button" class="btn btn-warning" onclick="<%=ctrl%>.regist()">送出</button>
              <button type="button" class="btn btn-warning">修改</button> -->
              <a href="#"><img src="play/sendBu.png" alt="送出" onclick="<%=ctrl%>.regist()"></a>
              <a href="#"><img src="play/updateBu.png" alt="修改"></a>
            </div>
          </div>
        <div class="clear"></div>
      </div>
    </div>
</div>


<div class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <% block('/warning'); %>
      <!-- 測試時，'/warning'可改成'/notice') -->
    </div>
  </div>
</div>
