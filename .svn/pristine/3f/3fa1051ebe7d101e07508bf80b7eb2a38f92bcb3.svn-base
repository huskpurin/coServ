<h1>活動報名</h1>
<div class="panel panel-default">
  <!-- Default panel contents -->
  <div class="panel-heading">
    <h3>報名梯次</h3>
  </div>
  <table class="table">
    <thead>
      <tr>
        <th>梯次</th>
        <th>日期</th>
        <th>時間</th>
        <th>區域</th>
        <th>場次</th>
        <th>報名狀態</th>
      </tr>
    </thead>
    <tbody>
      <% if (value && value.list.length > 0) {
         value.list.reverse().forEach(function(item) {
           var sTime = new Date(item.fromTime),
               eTime = new Date(item.toTime),
               period = sTime.getHours() + ":" + sTime.getMinutes() + "-" + eTime.getHours() + ":" + eTime.getMinutes("mm"),
               onTime = new Date(item.regFromTime),
               offTime = new Date(item.regToTm),
               now = new Date(),
               open = (now < offTime) ? true : false;
      %>
      <!-- open = ( onTime < now && now < offTime) ? true : false; -->
      <tr>
        <td><%= item.doc.title %></td>
        <td><%= item.doc.summary %></td>
        <td><%= period %></td>
        <td><%= item.addr %></td>
        <td><%= item.place %></td>
        <!-- TODO: 報名狀態
        停止報名 || 我要報名 || 尚未開放報名 -->
        <td><% if (open) { %><button class="btn btn-warning" onclick="<%=ctrl%>.fillSession('<%=item.siID%>')">我要報名</button><%}%></td>
      </tr>
      <% });
       } %>
    </tbody>
  </table>
</div>

<div>
  <h3>報名資料</h3>
  <form id="regForm" role="form">
    <div class="form-group col-md-6">
      <label for="siID" class="control-label">梯次</label>
      <select id="siID" class="form-control" name="siID">
        <%
        if (value && value.list.length > 0) {
          value.list.forEach(function(item) {
        %>
        <option value="<%=item.siID%>"><%=item.doc.title%></option>
        <% });
        } %>
      </select>
    </div>
    <div class="form-group col-md-12"></div>
    <div class="form-group col-md-6">
      <label for="fname" class="control-label">姓名</label>
      <input type="input" class="form-control" name="fname" id="fname" value="">
    </div>
    <div class="form-group col-md-6">
      <label for="gender" class="control-label">性別</label>
      <select id="gender" name="gender" class="form-control">
        <option value="0">男</option>
        <option value="1">女</option>
        <!-- <option value="2">--</option> -->
      </select>
    </div>
    <div class="form-group col-md-6">
      <label for="orgName" class="control-label">公司名稱</label>
      <input type="input" class="form-control" name="orgName" id="orgName" value="">
    </div>
    <!-- TODO: api未提供三公司欄位，等吧
    <select id="產業類別" name=""></select>
    <select id="公司設立年份" name=""></select>
    <input type="text" id="產品/營業項目簡述" name=""></input>

    *修改後記得更新collectData()

    -->
    <div class="form-group col-md-6">
      <label for="phone" class="control-label">電話</label>
      <input type="input" class="form-control" name="phone" id="phone" value="">
    </div>
    <div class="form-group col-md-6">
      <label for="fax" class="control-label">傳真</label>
      <input type="input" class="form-control" name="fax" id="fax" value="">
    </div>
    <div class="form-group col-md-6">
      <label for="email" class="control-label">E-mail</label>
      <input type="email" class="form-control" name="email" id="email" value="" required>
    </div>
    <div class="form-group col-md-12">
      <label for="addr" class="control-label">聯絡地址</label>
      <input type="input" class="form-control" name="addr" id="addr" value="">
    </div>
  </form>
  <div class="form-group col-md-12 row">
    <!-- <div class="col-sm-offset-2 col-sm-10"> -->
    <div class="text-center">
      <button type="button" class="btn btn-warning" onclick="<%=ctrl%>.regist()">送出</button>
      <button type="button" class="btn btn-warning">修改</button>
    </div>
  </div>
</div>

<div class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <% block('/warning'); %>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
