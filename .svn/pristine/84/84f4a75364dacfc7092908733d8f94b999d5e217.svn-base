<%
  function date(target) {
    var t = new Date(value[target]);
    var time = t.toLocaleTimeString().substring(0, 5);
    var rtn = t.getFullYear() +'-'+ ('0'+(t.getMonth()+1)).slice(-2) +'-'+ ('0'+t.getDate()).slice(-2) + ' ' + time;
    return rtn;
  }
%>
<% if (value) { %>
<div class="modal-header">
  <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
  <h4 class="modal-title">場次資訊</h4>
</div>
<div class="modal-body">
  <div class="spIDnInfo">
    <p>ID：<%=value.siID%></p>
    <form role="form">
      <div class="form-group col-md-6">
        <label for="title" class="control-label">梯次：</label>
        <input type="text" name="title" id="title" class="form-control" value="<%=value.doc.title%>"></input>
      </div>

      <div class="form-group col-md-6">
        <label for="summary" class="control-label">日期：</label>
        <input type="text" name="summary" id="summary" class="form-control" value="<%=value.doc.summary%>"></input>
      </div>
      <div class="form-group col-md-6">
        <label for="fromTm" class="control-label">開始時間：</label>
        <input type="text" name="fromTm" id="fromTm" class="form-control" value="<%=date('fromTime')%>" placeholder="yyyy-mm-dd hh:mm"></input>
      </div>
      <div class="form-group col-md-6">
        <label for="toTm" class="control-label">結束時間：</label>
        <input type="text" name="toTm" id="toTm" class="form-control" value="<%=date('toTime')%>" placeholder="yyyy-mm-dd hh:mm"></input>
      </div>
      <div class="form-group col-md-6">
        <label for="regFromTm" class="control-label">開始報名時間：</label>
        <input type="text" name="regFromTm" id="regFromTm" class="form-control" value="<%=date('regFromTm')%>" placeholder="yyyy-mm-dd hh:mm"></input>
      </div>
      <div class="form-group col-md-6">
        <label for="regToTm" class="control-label">結束報名時間：</label>
        <input type="text" name="regToTm" id="regToTm" class="form-control" value="<%=date('regToTm')%>" placeholder="yyyy-mm-dd hh:mm"></input>
      </div>
      <div class="form-group col-md-6">
        <label for="place" class="control-label">地區：</label>
        <input type="text" name="place" id="place" class="form-control" value="<%=value.place%>"></input>
      </div>
      <div class="form-group col-md-6">
        <label for="addr" class="control-label">地點：</label>
        <input type="text" name="addr" id="addr" class="form-control" value="<%=value.addr%>"></input>
      </div>
      <!-- -->
      <!-- 額外資訊 -->
      <p>人數：<%=value.capacity%></p>
      <!-- -->
    </form>
  </div>
</div>
<div class="modal-footer">
  <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
  <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="<%=ctrl%>.update('<%=value.siID%>');">儲存</button>
</div>
<%} else {%>
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
    <h4 class="modal-title">新增場次</h4>
  </div>
  <div class="modal-body">
    <div class="spIDnInfo">
      <form role="form">
        <div class="form-group col-md-6">
          <label for="title" class="control-label">梯次：</label>
          <input type="text" name="title" id="title" class="form-control" value=""></input>
        </div>
        <div class="form-group col-md-6">
          <label for="summary" class="control-label">日期：</label>
          <input type="text" name="summary" id="summary" class="form-control" value=""></input>
        </div>
        <div class="form-group col-md-6">
          <label for="fromTm" class="control-label">開始時間：</label>
          <input type="text" name="fromTm" id="fromTm" class="form-control" value="" placeholder="yyyy-mm-dd hh:mm"></input>
        </div>
        <div class="form-group col-md-6">
          <label for="toTm" class="control-label">結束時間：</label>
          <input type="text" name="toTm" id="toTm" class="form-control" value="" placeholder="yyyy-mm-dd hh:mm"></input>
        </div>
        <div class="form-group col-md-6">
          <label for="regFromTm" class="control-label">開始報名時間：</label>
          <input type="text" name="regFromTm" id="regFromTm" class="form-control" value="" placeholder="yyyy-mm-dd hh:mm"></input>
        </div>
        <div class="form-group col-md-6">
          <label for="regToTm" class="control-label">結束報名時間：</label>
          <input type="text" name="regToTm" id="regToTm" class="form-control" value="" placeholder="yyyy-mm-dd hh:mm"></input>
        </div>
        <div class="form-group col-md-6">
          <label for="place" class="control-label">地區：</label>
          <input type="text" name="place" id="place" class="form-control" value=""></input>
        </div>
        <div class="form-group col-md-6">
          <label for="addr" class="control-label">地點：</label>
          <input type="text" name="addr" id="addr" class="form-control" value=""></input>
        </div>
        <!-- 額外資訊 -->
        <p>人數：</p>
        <!-- -->
      </form>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
    <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="<%=ctrl%>.new();">新增</button>
  </div>
<%}%>
